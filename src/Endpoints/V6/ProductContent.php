<?php

/**
 * This file is auto-generated by
 * Inktweb\Bolcom\RetailerApi\Development\Generator\Endpoints
 */

namespace Inktweb\Bolcom\RetailerApi\Endpoints\V6;

use Inktweb\Bolcom\RetailerApi\Contracts\Endpoint;
use Inktweb\Bolcom\RetailerApi\Models\V6\CreateProductContentRequest;
use Inktweb\Bolcom\RetailerApi\Models\V6\Problem;
use Inktweb\Bolcom\RetailerApi\Models\V6\ProcessStatus;
use Inktweb\Bolcom\RetailerApi\Models\V6\ValidationReportResponse;

final class ProductContent extends Endpoint
{
    /**
     * Post product content.
     *
     * Create content for existing products or new products.
     */
    public function postProductContent(CreateProductContentRequest $body): ProcessStatus
    {
        return ProcessStatus::fromArray(
            $this->request(
                'post',
                'content/product',
                [],
                [],
                $body,
                [
                'application/vnd.retailer.v6+json',
                ],
                [
                'application/vnd.retailer.v6+json',
                ],
                [
                400 => Problem::class,
                ]
            )->getBody()->getJson()
        );
    }

    /**
     * Get validation report.
     *
     * Retrieve a validation report of the product content upload based on
     * the upload id.
     */
    public function getValidationReport(string $uploadId): ValidationReportResponse
    {
        return ValidationReportResponse::fromArray(
            $this->request(
                'get',
                'content/validation-report/{uploadId}',
                [
                'uploadId' => $uploadId,
                ],
                [],
                null,
                [
                'application/vnd.retailer.v6+json',
                ],
                [
                'application/vnd.retailer.v6+json',
                ],
                [
                404 => Problem::class,
                ]
            )->getBody()->getJson()
        );
    }
}
