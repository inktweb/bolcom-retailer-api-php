<?php

/**
 * This file is auto-generated by
 * Inktweb\Bolcom\RetailerApi\Development\Generator\Endpoints
 */

namespace Inktweb\Bolcom\RetailerApi\Endpoints\V10\Advertiser;

use GuzzleHttp\Exception\GuzzleException;
use Inktweb\Bolcom\RetailerApi\Contracts\Endpoint;
use Inktweb\Bolcom\RetailerApi\Exceptions\ApiException;
use Inktweb\Bolcom\RetailerApi\Exceptions\Enum\UnknownCollectionFormatException;
use Inktweb\Bolcom\RetailerApi\Exceptions\UnexpectedResponseContentTypeException;
use Inktweb\Bolcom\RetailerApi\Models\V10\Advertiser\GetCampaignPerformanceReportResponse;
use Inktweb\Bolcom\RetailerApi\Models\V10\Advertiser\GetShareOfVoiceReportResponse;
use Inktweb\Bolcom\RetailerApi\Models\V10\Advertiser\ProcessStatus;

final class Reporting extends Endpoint
{
    /**
     * Request a campaign performance report (BETA).
     *
     * Request a campaign performance report for the period requested.
     *
     * @throws ApiException
     * @throws GuzzleException
     * @throws UnexpectedResponseContentTypeException
     * @throws UnknownCollectionFormatException
     */
    public function postCampaignPerformanceReport(?string $startDate = null, ?string $endDate = null): ProcessStatus
    {
        return ProcessStatus::fromArray(
            $this->request(
                'post',
                '/advertiser/sponsored-products/campaign-performance/reports',
                [],
                [
                'start-date' => $startDate,
                'end-date' => $endDate,
                ],
                null,
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                'application/vnd.advertiser.v10+json',
                ],
                []
            )->getBody()->getJson()
        );
    }

    /**
     * Retrieve a campaign performance report by report id (BETA).
     *
     * Retrieve a campaign performance report by using the report id provided
     * to you when requesting a campaign performance report
     *
     * @throws ApiException
     * @throws GuzzleException
     * @throws UnexpectedResponseContentTypeException
     * @throws UnknownCollectionFormatException
     */
    public function getCampaignPerformanceReport(string $reportId): GetCampaignPerformanceReportResponse
    {
        return GetCampaignPerformanceReportResponse::fromArray(
            $this->request(
                'get',
                '/advertiser/sponsored-products/campaign-performance/reports/{report-id}',
                [
                'report-id' => $reportId,
                ],
                [],
                null,
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                404 => GetCampaignPerformanceReportResponse::class,
                410 => GetCampaignPerformanceReportResponse::class,
                ]
            )->getBody()->getJson()
        );
    }

    /**
     * Request a share of voice report for categories (BETA).
     *
     * Request a share of voice report on a category level for the last 14
     * days.
     *
     * @throws ApiException
     * @throws GuzzleException
     * @throws UnexpectedResponseContentTypeException
     * @throws UnknownCollectionFormatException
     */
    public function createShareOfVoiceCategoryReport(): ProcessStatus
    {
        return ProcessStatus::fromArray(
            $this->request(
                'post',
                '/advertiser/sponsored-products/share-of-voice/reports/category',
                [],
                [],
                null,
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                'application/vnd.advertiser.v10+json',
                ],
                []
            )->getBody()->getJson()
        );
    }

    /**
     * Request a share of voice report for search terms (BETA).
     *
     * Request a share of voice report on a search term level for the last 14
     * days.
     *
     * @throws ApiException
     * @throws GuzzleException
     * @throws UnexpectedResponseContentTypeException
     * @throws UnknownCollectionFormatException
     */
    public function createShareOfVoiceSearchTermReport(): ProcessStatus
    {
        return ProcessStatus::fromArray(
            $this->request(
                'post',
                '/advertiser/sponsored-products/share-of-voice/reports/search-term',
                [],
                [],
                null,
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                'application/vnd.advertiser.v10+json',
                ],
                []
            )->getBody()->getJson()
        );
    }

    /**
     * Retrieve a share of voice report by report id (BETA).
     *
     * Retrieve a share of voice report by using the report id provided to
     * you when requesting a share of voice report.
     *
     * @throws ApiException
     * @throws GuzzleException
     * @throws UnexpectedResponseContentTypeException
     * @throws UnknownCollectionFormatException
     */
    public function getShareOfVoiceReport(string $reportId): GetShareOfVoiceReportResponse
    {
        return GetShareOfVoiceReportResponse::fromArray(
            $this->request(
                'get',
                '/advertiser/sponsored-products/share-of-voice/reports/{report-id}',
                [
                'report-id' => $reportId,
                ],
                [],
                null,
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                'application/vnd.advertiser.v10+json',
                ],
                [
                404 => GetShareOfVoiceReportResponse::class,
                410 => GetShareOfVoiceReportResponse::class,
                ]
            )->getBody()->getJson()
        );
    }
}
